<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"
    />
    <link rel="stylesheet" href="video.css" />
    <script src="../libraries/video/yuv-canvas.js"></script>
    <script src="../../coders/APRSTelem.js"></script>
    <script src="../libraries/gauge.js"></script>
    <title>Video Window</title>
  </head>
  <body>
    <div id="top-bar">
      <div id="top-left">
        <img src="../images/logo.svg" alt="Logo" />
        <span>TRGS Video Stream</span>
      </div>
      <div id="top-right">
        <button id="fullscreen" class="top-button" title="Fullscreen">
          <img src="../images/fullscreen.svg" alt="Fullscreen" />
        </button>
        <button id="reload" class="top-button" title="Reload">
          <img src="../images/reload.svg" alt="Reload" />
        </button>
        <button id="minimize" class="top-button" title="Minimize">
          <img src="../images/minimize.svg" alt="Minimize" />
        </button>
        <button id="close" class="top-button" title="Close">
          <img src="../images/close.svg" alt="Close" />
        </button>
      </div>
    </div>
    <div id="main" class="two-video">
      <div id="telemetry">
        <div id="team-name-container">
          <img src="../images/trt-logo.png" alt="TRT Logo" id="trt-logo" /><span
            id="team-name"
            >Terrapin Rocket Team</span
          >
        </div>
        <div id="fun-facts-container" class="hide">
          <span id="fun-fact-title">Powered Flight</span>
          <span id="fun-fact-text"></span>
        </div>
        <div id="alt-gauge-container">
          <canvas
            id="altitude"
            data-type="radial-gauge"
            data-width="280"
            data-height="280"
            data-units="ft x 1000"
            data-title="Altitude"
            data-value="0"
            data-value-text="—" /* Initial value, JS updates. Will be transparent */
            data-min-value="0"
            data-max-value="36"
            data-major-ticks="0,6,12,18,24,30,36"
            data-minor-ticks="2" /* Reduced for cleaner look */
            data-stroke-ticks="true"
            data-highlights='[
              {"from": 30, "to": 36, "color": "#ca0000cc"}
            ]'
            data-color-plate="transparent" /* Transparent background */
            data-color-major-ticks="#888"
            data-color-minor-ticks="#555"
            data-color-title="#ddd"
            data-color-units="#999"
            data-color-numbers="#aaa"
            data-color-value-text="transparent" /* Make gauge's own value text invisible */
            data-borders="false"
            data-needle="false" /* Remove needle */
            data-animation-duration="1000" /* Slightly faster animation */
            data-animation-rule="linear"
            data-value-box="false"
            data-value-text-shadow="false"
            /* data-value-int and data-value-dec are less relevant as value text is transparent */
            data-border-shadow-width="0"
            /* Progress bar specific attributes */
            data-bar-width="12" /* Width of the progress bar */
            data-color-bar-progress="#ddd" /* Color of the filled part of the bar (e.g., main text color) */
            data-color-bar="#333" /* Color of the unfilled part of the bar (track) */
            /* Font settings for gauge's internal text (title, units, numbers) */
            data-font-title="Roboto"
            data-font-units="Roboto"
            data-font-numbers="Roboto"
            data-font-title-size="24" /* Adjust as needed */
            data-font-units-size="16"  /* Adjust as needed */
            data-font-numbers-size="13" /* Adjust as needed */
          ></canvas>
          <span id="alt-text">—</span>
        </div>
        <div id="small-text-container">
          <span id="max-alt">0 ft</span>
          <span id="max-spd">0 ft/s</span>
        </div>
        <div id="spd-gauge-container">
          <canvas
            id="speed"
            data-type="radial-gauge"
            data-width="280"
            data-height="280"
            data-units="ft/s x 100"
            data-title="Speed"
            data-value="0"
            data-value-text="—" /* Initial value, JS updates. Will be transparent */
            data-min-value="0"
            data-max-value="25"
            data-major-ticks="0,5,10,15,20,25"
            data-minor-ticks="2" /* Reduced for cleaner look */
            data-stroke-ticks="true"
            data-highlights='[
              {"from": 20, "to": 25, "color": "#ca0000cc"}
            ]'
            data-color-plate="transparent" /* Transparent background */
            data-color-major-ticks="#888"
            data-color-minor-ticks="#555"
            data-color-title="#ddd"
            data-color-units="#999"
            data-color-numbers="#aaa"
            data-color-value-text="transparent" /* Make gauge's own value text invisible */
            data-borders="false"
            data-needle="false" /* Remove needle */
            data-animation-duration="1000" /* Slightly faster animation */
            data-animation-rule="linear"
            data-value-box="false"
            data-value-text-shadow="false"
            /* data-value-int and data-value-dec are less relevant as value text is transparent */
            data-border-shadow-width="0"
            /* Progress bar specific attributes */
            data-bar-width="12" /* Width of the progress bar */
            data-color-bar-progress="#ddd" /* Color of the filled part of the bar (e.g., main text color) */
            data-color-bar="#333" /* Color of the unfilled part of the bar (track) */
            /* Font settings for gauge's internal text (title, units, numbers) */
            data-font-title="Roboto"
            data-font-units="Roboto"
            data-font-numbers="Roboto"
            data-font-title-size="24" /* Adjust as needed */
            data-font-units-size="16"  /* Adjust as needed */
            data-font-numbers-size="13" /* Adjust as needed */
          ></canvas>
          <span id="spd-text">—</span>
        </div>
      </div>

      <div id="video-0"></div>
      <div id="video-1"></div>

      <div id="video-sources">
        <canvas id="live-video-0" class="live-video"></canvas>
        <canvas id="live-video-1" class="live-video"></canvas>
        <div id="charts">
          Altitude
          <div id="alt-wrapper">
            <canvas id="alt-graph" class="chart"></canvas>
          </div>
          Speed
          <div id="spd-wrapper">
            <canvas id="spd-graph" class="chart"></canvas>
          </div>
        </div>
        <canvas id="3d-visualization" class="viz-3d"></canvas>
        <div id="none-0" class="no-signal"><span> Video Source 0 </span></div>
        <div id="none-1" class="no-signal"><span> Video Source 1 </span></div>
      </div>

      <div id="stage-container">
        <span id="s0" class="stage">On the Pad</span>
        <span id="s1" class="stage">Powered Flight</span>
        <span id="s2" class="stage">Coast</span>
        <span id="s3" class="stage">Drogue Deploy</span>
        <span id="s4" class="stage">Main Parachute</span>
        <span id="s5" class="stage">Landed</span>
        <progress id="stage" value="0" max="100">0%</progress>
      </div>
    </div>
    <script src="../libraries/charts/dist/chart.umd.js"></script>
    <script src="../libraries/charts.js"></script>
    <script src="video.js"></script>
  </body>
</html>